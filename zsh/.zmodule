#################################
# minimal module loader for zsh #
#################################

# module loader
function _load_from_git() {
  local git_repo="${1}"
  local module_dir="${ZDOTDIR:-${HOME}}/${2}"
  local dot_zsh="${3}"

  [[ ! -d "${module_dir}" ]] && \
    git clone --recursive "${git_repo}" "${module_dir}"
  source "${module_dir}/${dot_zsh}"
}

# load all modules here
_load_from_git "https://github.com/Eriner/zim/" ".zim" "init.zsh"
_load_from_git "https://github.com/Tarrasch/zsh-autoenv" \
  ".zmodules.d/zsh-autoenv" "init.zsh"
_load_from_git "https://github.com/zsh-users/zsh-autosuggestions" \
  ".zmodules.d/zsh-autosuggestions" "zsh-autosuggestions.zsh"

# unset module loader
unset -f _load_from_git

# vim: ft=zsh
