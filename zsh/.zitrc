# load Zit
export ZIT_MODULES_PATH="${HOME}/.zit.d"
if [[ ! -d "${ZIT_MODULES_PATH}/zit" ]]; then
  git clone "https://github.com/m45t3r/zit" "${ZIT_MODULES_PATH}/zit"
fi
source "${ZIT_MODULES_PATH}/zit/zit.zsh"

# let Zit manage Zit
zit-lo "zit" "zit.zsh"

# load modules

# Zim
# configuration
zmodules=(directory \
          environment \
          git \
          git-info \
          history \
          utility \
          meta \
          ssh \
          syntax-highlighting \
          history-substring-search \
          prompt \
          completion)
zprompt_theme='pure'
ztermtitle='%n@%m:%~'
zdouble_dot_expand='true'
zhighlighters=(main brackets cursor)
zssh_ids=(/dev/null)
fpath=(${${zmodules}:\
+${ZIT_MODULES_PATH}/zim/modules/${^zmodules}/functions(/FN)} ${fpath})

# modules
zit-in "https://github.com/Eriner/zim" "zim"
zit-lo "zim" "modules/directory/init.zsh"
zit-lo "zim" "modules/environment/init.zsh"
zit-lo "zim" "modules/git/init.zsh"
zit-lo "zim" "modules/git-info/init.zsh"
zit-lo "zim" "modules/history/init.zsh"
zit-lo "zim" "modules/utility/init.zsh"
zit-lo "zim" "modules/ssh/init.zsh"
zit-lo "zim" "modules/syntax-highlighting/init.zsh"
zit-lo "zim" "modules/history-substring-search/init.zsh"
zit-lo "zim" "modules/prompt/init.zsh"
zit-lo "zim" "modules/completion/init.zsh"

# Misc
zit-il "https://github.com/supercrabtree/k" "k" "k.sh"
zit-il "https://github.com/Tarrasch/zsh-autoenv" \
  "zsh-autoenv" "autoenv.zsh"
zit-il "https://github.com/zsh-users/zsh-autosuggestions" \
  "zsh-autosuggestions" "zsh-autosuggestions.zsh"

# Script to compile ZSH files
# Should be called last
zit-lo "zit" "extras/compile-zsh-files.zsh"

# vim: ft=zsh
